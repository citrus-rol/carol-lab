---
const base = import.meta.env.BASE_URL;
---

<nav id="navbar" class="navbar">
  <a href={`${base}`} class="logo">
    <img src={`${base}navbar_logo.svg`} alt="Carol Lab Logo" />
  </a>

  <!-- æ¼¢å ¡é¸å–®æŒ‰éˆ• -->
  <button class="menu-btn" aria-label="Menu">
    <span></span>
    <span></span>
    <span></span>
  </button>

  <!-- é¸å–® -->
  <ul id="menu" class="menu">
    <li><a href={`${base}`}>é¦–é </a></li>
    <li><a href={`${base}works`}>ä½œå“</a></li>
    <li><a href={`${base}contact`}>è¯çµ¡</a></li>
  </ul>
</nav>

<style>
/* Navbar åŸºæœ¬ */
.navbar {
  position: fixed;
  top: 0; left: 0; right: 0;
  height: 60px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 20px;
  z-index: 1000;
  transition: background-color 0.3s ease, box-shadow 0.3s ease;
}

/* æ»¾å‹•è®Šè‰² */
.navbar.scrolled {
  background: #505e6680;
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  backdrop-filter: blur(6px);
}

/* Logo */
.logo img {
  height: 72px;
}

/* Menu */
.menu {
  display: flex;
  gap: 24px;
  list-style: none;
  margin: 0;
  padding: 0;
}

.menu a {
  color: #fff;
  text-decoration: none;
  font-size: 1rem;
  transition: color 0.3s;
}
.menu a:hover { color: #E5AF3A; }

/* æ¼¢å ¡æŒ‰éˆ• */
.menu-btn {
  display: none;                /* æ¡Œé¢ç‰ˆéš±è— */
  flex-direction: column;
  justify-content: space-between;
  width: 40px;
  height: 28px;
  background: none;
  border: none;
  cursor: pointer;
  z-index: 1100;                /* ç¢ºä¿è“‹éé¸å–® */
}

.menu-btn span {
  display: block;
  height: 3px;
  width: 100%;
  background: #fff;
  border-radius: 2px;
  transition: all 0.3s ease;
}

/* æ¼¢å ¡å‹•ç•« â†’ X */
.menu-btn.active span:nth-child(1) {
  transform: rotate(45deg) translateY(16px);
}
.menu-btn.active span:nth-child(2) {
  opacity: 0;
}
.menu-btn.active span:nth-child(3) {
  transform: rotate(-45deg) translateY(-16px);
}

/* æ‰‹æ©Ÿç‰ˆé¸å–® */
@media (max-width: 768px) {
  .menu {
    display: none;
    position: absolute;
    top: 60px;
    right: 0;
    flex-direction: column;
    background: #505e6680;
    width: 180px;
    padding: 16px;
    border-radius: 8px 0 0 8px;
  }
  .menu.active { display: flex; }
  .menu-btn { display: flex; }
}
</style>

<script is:inline>
document.addEventListener("DOMContentLoaded", () => {
  const btn = document.querySelector(".menu-btn");
  const menu = document.getElementById("menu");
  const navbar = document.getElementById("navbar");
  const main = document.querySelector("page-content"); // ğŸ‘ˆ æŠ“ mainï¼Œä¸ç”¨ id

  // æ‰‹æ©Ÿé¸å–®é–‹é—œ
  btn?.addEventListener("click", () => {
    btn.classList.toggle("active");
    menu?.classList.toggle("active");
  });

  // åˆ¤æ–·æ»¾å‹•çš„å‡½å¼
  function checkScroll(scrollTop) {
    if (scrollTop > 20) {
      navbar?.classList.add("scrolled");
    } else {
      navbar?.classList.remove("scrolled");
    }
  }

  // ç›£è½ main æ»¾å‹•ï¼ˆå¦‚æœ main æœ¬èº«å¯æ»¾å‹•ï¼‰
  if (main && getComputedStyle(main).overflowY !== "visible") {
    main.addEventListener("scroll", () => {
      checkScroll(main.scrollTop);
    });
    checkScroll(main.scrollTop); // åˆå§‹åŒ–
  } else {
    // å¦å‰‡ç›£è½ window
    window.addEventListener("scroll", () => {
      checkScroll(window.scrollY);
    });
    checkScroll(window.scrollY); // åˆå§‹åŒ–
  }
});
</script>
