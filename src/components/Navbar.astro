---
const base = import.meta.env.BASE_URL;
---

<nav id="navbar" class="navbar">
  <a href={`${base}`} class="logo">
    <img src={`${base}navbar_logo.svg`} alt="Carol Lab Logo" />
  </a>

  <!-- 漢堡選單按鈕 -->
  <button class="menu-btn" aria-label="Menu">
    <span></span>
    <span></span>
    <span></span>
  </button>

  <!-- 選單 -->
  <ul id="menu" class="menu">
    <li><a href={`${base}`}>首頁</a></li>
    <li><a href={`${base}works`}>作品</a></li>
    <li><a href={`${base}contact`}>聯絡</a></li>
  </ul>
</nav>

<style>
/* Navbar 基本 */
.navbar {
  position: fixed;
  top: 0; left: 0; right: 0;
  height: 60px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 20px;
  z-index: 1000;
  transition: background-color 0.3s ease, box-shadow 0.3s ease;
}

/* 滾動變色 */
.navbar.scrolled {
  background: #505e6680;
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  backdrop-filter: blur(6px);
}

/* Logo */
.logo img {
  height: 72px;
}

/* Menu */
.menu {
  display: flex;
  gap: 24px;
  list-style: none;
  margin: 0;
  padding: 0;
}

.menu a {
  color: #fff;
  text-decoration: none;
  font-size: 1rem;
  transition: color 0.3s;
}
.menu a:hover { color: #E5AF3A; }

/* 漢堡按鈕 */
.menu-btn {
  display: none;                /* 桌面版隱藏 */
  flex-direction: column;
  justify-content: space-between;
  width: 40px;
  height: 28px;
  background: none;
  border: none;
  cursor: pointer;
  z-index: 1100;                /* 確保蓋過選單 */
}

.menu-btn span {
  display: block;
  height: 3px;
  width: 100%;
  background: #fff;
  border-radius: 2px;
  transition: all 0.3s ease;
}

/* 漢堡動畫 → X */
.menu-btn.active span:nth-child(1) {
  transform: rotate(45deg) translateY(16px);
}
.menu-btn.active span:nth-child(2) {
  opacity: 0;
}
.menu-btn.active span:nth-child(3) {
  transform: rotate(-45deg) translateY(-16px);
}

/* 手機版選單 */
@media (max-width: 768px) {
  .menu {
    display: none;
    position: absolute;
    top: 60px;
    right: 0;
    flex-direction: column;
    background: #505e6680;
    width: 180px;
    padding: 16px;
    border-radius: 8px 0 0 8px;
  }
  .menu.active { display: flex; }
  .menu-btn { display: flex; }
}
</style>

<script is:inline>
document.addEventListener("DOMContentLoaded", () => {
  const btn = document.querySelector(".menu-btn");
  const menu = document.getElementById("menu");
  const navbar = document.getElementById("navbar");
  const main = document.querySelector("page-content"); // 👈 抓 main，不用 id

  // 手機選單開關
  btn?.addEventListener("click", () => {
    btn.classList.toggle("active");
    menu?.classList.toggle("active");
  });

  // 判斷滾動的函式
  function checkScroll(scrollTop) {
    if (scrollTop > 20) {
      navbar?.classList.add("scrolled");
    } else {
      navbar?.classList.remove("scrolled");
    }
  }

  // 監聽 main 滾動（如果 main 本身可滾動）
  if (main && getComputedStyle(main).overflowY !== "visible") {
    main.addEventListener("scroll", () => {
      checkScroll(main.scrollTop);
    });
    checkScroll(main.scrollTop); // 初始化
  } else {
    // 否則監聽 window
    window.addEventListener("scroll", () => {
      checkScroll(window.scrollY);
    });
    checkScroll(window.scrollY); // 初始化
  }
});
</script>
