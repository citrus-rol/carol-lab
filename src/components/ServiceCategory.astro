---
// categories.ts
type Item = {
  title: string;       // ä¸­æ–‡ / è‹±æ–‡
  description: string; // ä¸­æ–‡æè¿°
  descriptionEn?: string; // è‹±æ–‡æè¿° (å¯é¸)
};

type Category = {
  title: string;       // ä¸­æ–‡ / è‹±æ–‡
  items: Item[];
};

export const categories: Category[] = [
  {
    title: 'å“ç‰Œèˆ‡è­˜åˆ¥è¨­è¨ˆ / Brand & Identity',
    
    items: [
      { title: 'å“ç‰Œè­˜åˆ¥ç³»çµ± / Visual Identity System (VIS)', description: 'å»ºç«‹å®Œæ•´å“ç‰Œè¦–è¦ºèªè¨€ï¼Œçµ±ä¸€æ‡‰ç”¨æ–¼å„ç¨®åª’ä»‹ã€‚', descriptionEn: 'Build a complete visual identity system across media.' },
      { title: 'Logo è¨­è¨ˆ / Logo Design', description: 'ç‚ºå“ç‰Œå‰µå»ºå°ˆå±¬æ¨™èªŒï¼Œæå‡è¾¨è­˜åº¦èˆ‡å°ˆæ¥­å½¢è±¡ã€‚', descriptionEn: 'Create a unique brand logo.' },
      { title: 'æ¨™æº–å­— / Logotype Design', description: 'è¨­è¨ˆå°ˆå±¬å­—é«”ï¼Œå¢å¼·å“ç‰Œç‰¹è‰²èˆ‡è­˜åˆ¥åŠ›ã€‚', descriptionEn: 'Design a custom logotype to enhance brand identity.' },
    ],
  },
  {
    title: 'å­—é«”èˆ‡æ–‡å­—è¨­è¨ˆ / Typography & Lettering',
    items: [
      { title: 'å°ˆå±¬å­—é«” / Custom Typeface', description: 'å‰µé€ å“ç‰Œæˆ–å°ˆæ¡ˆå°ˆå±¬å­—å‹ï¼Œå‘ˆç¾ç¨ç‰¹é¢¨æ ¼ã€‚', descriptionEn: 'Create a custom typeface for unique style.' },
      { title: 'ä¸»é¡Œå­—é«” / Event & Thematic Lettering', description: 'ç‚ºæ´»å‹•æˆ–ç‰¹å®šä¸»é¡Œè¨­è¨ˆå­—é«”ï¼Œæå‡è¦–è¦ºå¸å¼•åŠ›ã€‚', descriptionEn: 'Design thematic lettering for events.' },
    ],
  },
  {
    title: 'æ’ç•«èˆ‡è§’è‰²è¨­è¨ˆ / Illustration & Character Design',
    items: [
      { title: 'æ’ç•«æ‡‰ç”¨ / Illustration Application', description: 'å°‡æ’ç•«å…ƒç´ æ‡‰ç”¨æ–¼å•†å“ã€å‘¨é‚Šæˆ–ç¤¾ç¾¤è²¼åœ–ã€‚', descriptionEn: 'Apply illustrations to products, merch, or stickers.' },
      { title: 'è§’è‰²è¨­è¨ˆ / IP & Character Design', description: 'æ‰“é€ å“ç‰Œå°ˆå±¬è§’è‰²ï¼Œå¢åŠ è¦ªå’ŒåŠ›èˆ‡æ•…äº‹æ„Ÿã€‚', descriptionEn: 'Create brand characters for affinity and storytelling.' },
    ],
  },
  {
    title: 'è¦–è¦ºèˆ‡å½±åƒå…§å®¹è¨­è¨ˆ / Visual & Motion Content',
    items: [
      { title: 'å½±åƒå‰ªè¼¯ / Video Editing', description: 'å°‡ç´ æå‰ªè¼¯æˆæ•…äº‹åŒ–å½±åƒï¼Œå‘ˆç¾å“ç‰Œè¨Šæ¯ã€‚', descriptionEn: 'Edit footage into storytelling videos.' },
      { title: 'å‹•æ…‹åœ–åƒ / Motion Graphics', description: 'é€éå‹•ç•«å‘ˆç¾å“ç‰Œæˆ–ç”¢å“ç‰¹è‰²ï¼Œæå‡å¸å¼•åŠ›ã€‚', descriptionEn: 'Create animations to showcase brand or product features.' },
      { title: 'ç¤¾ç¾¤çŸ­å½±ç‰‡ / Social Media & Shorts', description: 'ç‚ºç¤¾ç¾¤å¹³å°è£½ä½œçŸ­å½±ç‰‡ï¼Œå¢å¼·äº’å‹•èˆ‡å‚³æ’­æ•ˆæœã€‚', descriptionEn: 'Produce short social media videos to boost engagement.' },
    ],
  },
];
---

<section class="service-category-grid">
  {categories.map((cat) => (
    <div class="category-card">
      <button class="category-btn">
        <span class="title-zh">{cat.title.split(' / ')[0]}</span>
        <span class="title-en">{cat.title.split(' / ')[1]}</span>
      </button>
      <div class="category-items">
        {cat.items.map((item) => (
          <div class="item-card">
            {/* å·¦å´å°ç·šæ¢ */}
            <div class="decor-line line1"></div>
            <div class="item-left">
              <span class="item-title-zh">{item.title.split(' / ')[0]}</span>
            </div>
            <div class="item-right">
              <span class="item-desc-zh">{item.description}</span>
            </div>
            <div class="item-left">
              <span class="item-title-en">{item.title.split(' / ')[1]}</span>
            </div>
            <div class="item-right">
              {item.descriptionEn && <span class="item-desc-en">{item.descriptionEn}</span>}
            </div>
          </div>
        ))}
      </div>
    </div>
  ))}
</section>

<style>
.service-category-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 24px;
}

.category-card {
  perspective: 1000px;
  opacity: 0;
  transform: translateY(20px);
}
@keyframes fadeInUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* å»¶é²è¨­å®šï¼šå¦‚æœ category-card æ•¸é‡å›ºå®šï¼Œå¯æ‰‹å‹•è¨­å®š */
.category-card:nth-child(1),
.category-card:nth-child(2),
.category-card:nth-child(3),
.category-card:nth-child(4) { 
  animation-delay: 0; 
}

/* å¤§æ¨™ */
.category-btn {
  width: 100%;
  padding: 20px;
  font-weight: 500;
  background: linear-gradient(to left, #24364080, #e5af3a80, #e5af3a80, #24364080);
  color: #d3d7d9;
  box-shadow: 0 0 16px 4px #24364080;
  border: none;
  border-radius: 12px;
  text-align: center;
  cursor: pointer;
  transition: transform 0.25s, box-shadow 0.25s;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.category-btn::after {
  content: 'â–¼';
  position: absolute;
  top: 40%;
  right: 24px;
  transition: transform 0.25s;
}

.category-btn.active::after {
  transform: rotate(-180deg);
}

.category-btn:hover {
  transform: scale(1.02);
  box-shadow: 0 0 12px 4px #d3d7d980;
}

/* å¤§æ¨™ä¸­è‹±æ–‡ */
.title-zh { display: block; 
  font-size: clamp(0.9rem, 1.5vw, 1.5rem); /* å°æ¨™é¡Œ */ 
  letter-spacing: 0.2rem; /* æ®µè½æ–‡å­—é–“è· */ 
}
.title-en { display: block; 
  font-size: clamp(0.9rem, 1.5vw, 1.5rem); /* å°æ¨™é¡Œ */ 
  letter-spacing: 0.1rem; /* æ®µè½æ–‡å­—é–“è· */ 
}

/* å±•é–‹å‹•ç•« */
.category-items {
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  transition: max-height 0.5s ease, opacity 0.5s ease;
  margin-top: 16px;
}

.category-btn.active + .category-items {
  max-height: 1000px;
  opacity: 1;
}

/* å°æ¨™å¡ç‰‡ */
.item-card {
  background: #24364080;
  backdrop-filter: blur(4px);
  margin-bottom: 10px;
  border-radius: 12px;
  cursor: pointer;
  transition: transform 0.25s, box-shadow 0.25s, all 0.3s ease;
  display: grid;
  grid-template-columns: 1.2fr 2.8fr;
  gap: 16px;
  align-items: center;
  padding: 16px;
}

.item-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 8px #d3d7d980;
}

/* å·¦æ¬„ä¸­æ¨™ */
.item-left {
  display: flex;
  flex-direction: column;
  align-items: center;
  
}
.item-left span { 
  text-align: center;
  color: #d3d7d9; 
}
.item-title-zh { 
  font-size: clamp(0.8rem, 1.2vw, 1.2rem);/* å…§æ–‡å­— */ 
  letter-spacing: 0.05rem;
}
.item-title-en { 
  font-size: clamp(0.8rem, 1.2vw, 1.2rem);/* å…§æ–‡å­— */ 
  letter-spacing: 0.01rem;
}

/* å³æ¬„å…§å®¹ */
.item-right {
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 4px;
  transition: all 0.3s ease;
}

.item-right span {
  text-align: left;
  color: #d3d7d9;
}
.item-desc-zh { 
  font-size: clamp(0.75rem, 1vw, 1rem);/* è¨»è§£ã€å°å­— */
  letter-spacing: 0.05rem;
}
.item-desc-en { 
  font-size: clamp(0.75rem, 1vw, 1rem);/* è¨»è§£ã€å°å­— */
  letter-spacing: 0.01rem;
}

/* å·¦å´å°ç·šæ¢ */
.decor-line {
  position:absolute;
  width:4px;
  height:80%;
  border-radius:1px;
  pointer-events:none;
  animation: float 5s ease-in-out infinite alternate;
}
.line1 { 
  left: 8px;  
  background:linear-gradient(to top, #24364080, #e5af3a80, #24364080); 
}

/* æ¼‚æµ®å‹•ç•« */
@keyframes float {
  0% { transform: translateY(0); }
  50% { transform: translateY(-2px); }
  100% { transform: translateY(0); }
}

.category-card:hover .category-btn {
  animation: float 1.5s ease-in-out infinite alternate;
}

/* éŸ¿æ‡‰å¼ */
@media (max-width: 768px) {
  .service-category-grid { grid-template-columns: 1fr; }
  .item-card {
    grid-template-columns: 1fr;
    gap: 12px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: stretch;
    padding: 16px 12px; /* æ–°å¢å·¦å³å…§è· */
    transition: all 0.3s ease;
  }

  .item-left {
    align-items: center;
    display: flex;
    flex-direction: column;
  }

  .item-right {
    align-items: center;
    display: flex;
    flex-direction: column;
  }
  /* ğŸ”‘ ä¿®æ­£æ‰‹æ©Ÿç‰ˆ item-right è£¡æ–‡å­—ç½®ä¸­ */
  .item-right span {
    text-align: center;
  }
}

</style>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const cards = Array.from(document.querySelectorAll('.category-card'));
  const groupSize = 2;    // æ¯çµ„å¹¾å€‹å¤§å¡ç‰‡ä¸€èµ·å‡ºç¾       
  const delayBetweenGroups = 500;   // æ¯çµ„ä¹‹é–“å»¶é²

  const observerOptions = {
    root: null,
    rootMargin: '0px',
    threshold: 0.3,   //30% é€²å…¥è¦–çª—å°±è§¸ç™¼
  };

  const observer = new IntersectionObserver((entries, obs) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        const cardIndex = cards.indexOf(entry.target);
        const groupStart = Math.floor(cardIndex / groupSize) * groupSize;
        const group = cards.slice(groupStart, groupStart + groupSize);

        group.forEach((card) => {
          if (!(card instanceof HTMLElement)) return; // ç¢ºä¿ card æœ‰ style
          card.style.opacity = '0';
          card.style.transform = 'translateY(40px)';
          card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
          setTimeout(() => {
            card.style.opacity = '1';
            card.style.transform = 'translateY(0)';
          }, 0);
        });

        obs.unobserve(entry.target);
      }
    });
  }, observerOptions);

  cards.forEach((card) => observer.observe(card));

  // é»æ“Šå±•é–‹å°å¡ç‰‡
  document.querySelectorAll('.category-btn').forEach((btn) => {
    btn.addEventListener('click', () => {
      btn.classList.toggle('active');
      const itemsContainer = btn.nextElementSibling;
      if (!(itemsContainer instanceof HTMLElement)) return;

      const itemCards = Array.from(itemsContainer.querySelectorAll('.item-card'));
      itemCards.forEach((card, i) => {
        if (!(card instanceof HTMLElement)) return;
        card.style.transition = `opacity 0.4s ease ${i * 0.15}s, transform 0.4s ease ${i * 0.15}s`;
        if (btn.classList.contains('active')) {
          card.style.opacity = '0';
          card.style.transform = 'translateY(10px)';
          setTimeout(() => {
            card.style.opacity = '1';
            card.style.transform = 'translateY(0)';
          }, 50);
        } else {
          card.style.opacity = '0';
          card.style.transform = 'translateY(10px)';
        }
      });

      if (btn.classList.contains('active')) {
        itemsContainer.style.maxHeight = itemsContainer.scrollHeight + 'px';
        itemsContainer.style.opacity = '1';
      } else {
        itemsContainer.style.maxHeight = '0';
        itemsContainer.style.opacity = '0';
      }
    });
  });
});
</script>
